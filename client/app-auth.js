var app=angular.module("BridgeSystemOnline",["ui.router"]);app.controller("AppCtrl",["$scope","$http","$state","$window","MainSvc",function(i,e,n,o,t){var u=localStorage.getItem("token");u||(o.location.href="/#/login"),e.defaults.headers.common["x-auth"]=u,i.user={username:localStorage.getItem("username"),cezar:localStorage.getItem("cezar")},i.$on("newGroupEvent",function(e,n){i.groups.push(n)});var a=function(){var e=localStorage.getItem("theme");i.theme="1"==e};a(),i.$on("themeEvent",function(){a()}),i.chooseGroup=function(e){i.chosenGroup=e._id,i.chosenGroupName=e.name,i.$broadcast("chooseGroupEvent",e)},i.logOut=function(){t.logOut()};e.get("/api/groups").success(function(e){i.groups=e}).error(function(e){"Unauthorized"===e&&t.logOut(),i.groups={}}),n.go("start"),$(document).ready(function(){$(".button-collapse").sideNav(),$(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrainWidth:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"left",stopPropagation:!0})})}]),app.service("ArraySvc",function(){var n=this;n.getSize=function(e){for(var n=0;e[n];)n++;return--n},n.destroyLast=function(e){return e[n.getSize(e)]=void 0,e}}),app.controller("BidCtrl",["$scope","$http","$state","ArraySvc","MainSvc",function(a,r,e,d,s){var n=function(){var e=localStorage.getItem("theme");a.theme="1"==e};n(),a.$on("themeEvent",function(){n()}),a.$on("chooseGroupEvent",function(e,n){a.chosenGroup=n._id,o([])}),a.sequence={},a.twoSide=!1,a.varKeepAuction=!1,a.description=[],a.toBeUpdated=[],a.auction={bids:[{index:1,value:"pass"},{index:2,value:"x"},{index:3,value:"xx"},{index:4,value:"1club"},{index:5,value:"1diamond"},{index:6,value:"1heart"},{index:7,value:"1spade"},{index:8,value:"1NT"},{index:9,value:"2club"},{index:10,value:"2diamond"},{index:11,value:"2heart"},{index:12,value:"2spade"},{index:13,value:"2NT"},{index:14,value:"3club"},{index:15,value:"3diamond"},{index:16,value:"3heart"},{index:17,value:"3spade"},{index:18,value:"3NT"},{index:19,value:"4club"},{index:20,value:"4diamond"},{index:21,value:"4heart"},{index:22,value:"4spade"},{index:23,value:"4NT"},{index:24,value:"5club"},{index:25,value:"5diamond"},{index:26,value:"5heart"},{index:27,value:"5spade"},{index:28,value:"5NT"},{index:29,value:"6club"},{index:30,value:"6diamond"},{index:31,value:"6heart"},{index:32,value:"6spade"},{index:33,value:"6NT"},{index:34,value:"7club"},{index:35,value:"7diamond"},{index:36,value:"7heart"},{index:37,value:"7spade"},{index:38,value:"7NT"}],addBid:function(e){a.sequence[a.currentBidIndex]=e,1==a.twoSide?a.biddingBox(a.currentBidIndex+1,!0):(a.sequence[a.currentBidIndex+1]=a.auction.bids[0],a.biddingBox(a.currentBidIndex+2,!0)),i(),o(a.sequence)},lastBid:3,canDouble:!1,canRedouble:!1},a.addBid=function(){for(var e=function(e,n,i,o,t){this.bid=e.index,this.description=n,this.sequence=i,this.twoSide=o},n=[],i=0;i<d.getSize(a.sequence);i++)n.push(a.sequence[i].index.toString());var o=[],t=[];for(i=0;i<a.description.length;i++)if(a.description[i]&&a.description[i].description&&""!==a.description[i].description&&(i>=a.auction.lastBid||i<4)){var u=new e(a.auction.bids[i-1],a.description[i].description,n,a.twoSide);a.description[i].toBeUpdated?(u._id=a.description[i].toBeUpdated,t.push(u)):o.push(u)}o[0]?r.post("/api/bids",{chosenGroup:a.chosenGroup,entries:o,convention:a.convention}).success(function(e){Materialize.toast("Dodano odzywki",4e3),t[0]?c(t):l()}).error(function(e){"Unauthorized"===e&&s.logOut(),Materialize.toast("Wystąpił błąd",4e3)}):t[0]&&c(t)},a.bidAlreadyExists=function(e){if(a.description[e]||(a.description[e]={}),a.description[e].toBeUpdated=!1,!a.bids||!a.bids[0])return!1;for(var n=0;n<a.bids.length;n++)if(a.bids[n].bid==e)return a.description[e].toBeUpdated=a.bids[n]._id,a.bids[n].description;return!1},a.biddingBox=function(e,n){a.currentBidIndex=e,n||(a.showBiddingBox?a.showBiddingBox=!1:a.showBiddingBox=!0);for(var i=e-1,o=3;a.sequence[i];)a.sequence[i].index>o&&(o=a.sequence[i].index),i--;a.auction.currentMinBid=o};var i=function(){if(-1==d.getSize(a.sequence))return a.auction.lastBid=3,a.canDouble=!1,void(a.canRedouble=!1);var e=d.getSize(a.sequence),n=e;for(a.auction.lastBid=a.sequence[e].index;a.sequence[e].index<=3;)a.auction.lastBid=a.sequence[e].index,e--;if(!a.sequence[e])return a.auction.lastBid=3,a.canDouble=!1,void(a.canRedouble=!1);for(a.auction.lastBid=a.sequence[e].index,e=n;1===a.sequence[n].index;)n--;3===a.sequence[n].index?(a.auction.canDouble=!1,a.auction.canRedouble=!1):2===a.sequence[n].index?(a.auction.canDouble=!1,a.auction.canRedouble=n%2==e%2):(a.auction.canRedouble=!1,a.auction.canDouble=n%2==e%2)},o=function(e){for(var n=[],i=0;i<d.getSize(e);i++)n.push(e[i].index);r.get("/api/bid",{headers:{"x-group":a.chosenGroup,"x-sequence":n}}).success(function(e){a.bids=e}).error(function(e){"Unauthorized"===e&&s.logOut,a.bids={}})},c=function(e){r.post("/api/upBids",{chosenGroup:a.chosenGroup,updates:e}).success(function(){l(),Materialize.toast("Zaktualizowano odzywki",4e3)}).error(function(e){"Unauthorized"===e&&s.logOut(),Materialize.toast("Wystąpił błąd",4e3)})},l=function(){a.description=[],a.convention="",0==a.varKeepAuction&&a.removeAll(),o(a.sequence)};a.insertColor=function(e,n){switch(a.description[n]||(a.description[n]={}),a.description[n].description||(a.description[n].description=""),e){case 1:a.description[n].description+="♣";break;case 2:a.description[n].description+="♦";break;case 3:a.description[n].description+="♥";break;case 4:a.description[n].description+="♠";break;default:Materialize.toast("Wystąpił błąd",4e3)}document.getElementById(n).focus()},a.removeAll=function(){a.sequence={},a.auction.lastBid=3,a.auction.canDouble=!1,a.auction.canRedouble=!1,a.auction.currentMinBid=3,a.biddingBox(0,!0),o(a.sequence)},a.removeLast=function(){if(d.getSize(a.sequence)<0)return Materialize.toast("Licytacja jest już pusta",4e3);if(d.destroyLast(a.sequence),!(d.getSize(a.sequence)<0)){0==a.twoSide&&d.destroyLast(a.sequence),i();var e=d.getSize(a.sequence);-1===e&&(e=0),a.biddingBox(e,!0),o(a.sequence)}},a.toggleKeepAuction=function(){0==a.varKeepAuction?a.varKeepAuction=!0:a.varKeepAuction=!1},a.toggleTwoSide=function(){0==a.twoSide?a.twoSide=!0:a.twoSide=!1},a.biddingBoxFilter=function(e){if(a.auction.currentMinBid<e.index)return e},a.bidsFilter=function(e){if(a.auction.lastBid<e.index)return e},$(document).ready(function(){$(".tooltipped").tooltip({delay:50}),$(".modal").modal({complete:function(){}})}),a.chosenGroup&&o([])}]),app.controller("GroupCtrl",["$http","$scope","$state","$window","MainSvc",function(o,t,e,n,i){var u=function(){var e=localStorage.getItem("theme");t.theme="1"==e};u(),t.$on("themeEvent",function(){u()}),t.user=localStorage.getItem("username"),t.id=localStorage.getItem("id"),t.addGroup=function(){if(!t.newTeamName||""===t.newTeamName)return Materialize.toast("Brak nazwy!",4e3);o.post("/api/group",{name:t.newTeamName,description:t.newTeamDescription}).success(function(e){Materialize.toast("Dodano grupę",4e3),e.users[0]={_id:e.users[0]},e.admins[0]={_id:e.admins[0]},t.groups.push(e),t.newTeamName="",t.newTeamDescription="",t.$emit("newGroupEvent",e)}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Błąd w dodawaniu grupy",4e3)})},t.addUserToGroup=function(e){var n="/user/"+e;o.get(n).success(function(e){for(var n=0;n<t.openedGroup.users.length;n++)if(t.openedGroup.users[n].username===e.username)return Materialize.toast("Użytkownik jest już członkiem grupy",4e3);o.post("/api/addUserToGroup",{group:t.openedGroup._id,user:e._id}).success(function(){Materialize.toast("Dodano użytkownika",4e3),t.openedGroup.users.push(e)}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Problem w dodaniu użytkownika",4e3)})}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Nie odnaleziono użytkownika",4e3)})},t.removeUserFromGroup=function(e){o.post("/api/removeUserFromGroup",{group:t.openedGroup._id,user:e._id}).success(function(){Materialize.toast("Usunięto użytkownika",4e3),a(),t.openGroup(t.openedGroup)}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Problem w usunięciu użytkownika",4e3)})},t.addUserToAdmins=function(e){o.post("/api/addUserToAdmins",{group:t.openedGroup._id,user:e._id}).success(function(){Materialize.toast("Dodano użytkownika do administratorów",4e3),t.openedGroup.admins.push(e)}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Problem w dodaniu użytkownika do administratorów",4e3)})},t.checkIfAdmin=function(e){for(var n=0,i=t.openedGroup.admins.length;n<i;n++)if(t.openedGroup.admins[n]._id==e)return!0;return!1},t.removeUserFromAdmins=function(e){o.post("/api/removeUserFromAdmins",{group:t.openedGroup._id,user:e._id}).success(function(){Materialize.toast("Usunięto administratora",4e3),a(),t.openGroup(t.openedGroup)}).error(function(e){"Unauthorized"===e&&i.logOut(),Materialize.toast("Problem w usunięciu administratora",4e3)})},t.checkIfAdmin=function(e){for(var n=0,i=t.openedGroup.admins.length;n<i;n++)if(t.openedGroup.admins[n]._id==e)return!0;return!1},t.openCezar=function(e){e&&n.open(e)},t.openGroup=function(e){if(t.openedGroup)if(t.openedGroup._id===e._id)t.openedGroup=null;else{var n;(n={}).users=e.users,n.admins=e.admins,e.users=[],e.admins=[],t.openedGroup=e,r(n)}else(n={}).users=e.users,n.admins=e.admins,e.users=[],e.admins=[],t.openedGroup=e,r(n)};var a=function(){o.get("/api/groups").success(function(e){t.groups=e;for(var n=0;n<t.groups.length;n++){for(var i=[],o=0;o<t.groups[n].users.length;o++)i.push({_id:t.groups[n].users[o]});t.groups[n].users=i,i=[];for(o=0;o<t.groups[n].admins.length;o++)i.push({_id:t.groups[n].admins[o]});t.groups[n].admins=i}}).error(function(e){"Unauthorized"===e&&i.logOut(),t.groups={}})},r=function(e){for(var n=0;n<e.users.length;n++){var i="/users/"+e.users[n]._id;o.get(i).success(function(e){t.openedGroup.users.push(e)}).error(function(){t.openedGroup.users.push(e.users[n]={username:"unknown",_id:e.users[n]._id})})}for(n=0;n<e.admins.length;n++){i="/users/"+e.admins[n]._id;o.get(i).success(function(e){t.openedGroup.admins.push(e)}).error(function(){t.openedGroup.admins.push(e.users[n]={username:"unknown",_id:e.users[n]._id})})}};a(),$(document).ready(function(){$(".tooltipped").tooltip(),$(".modal").modal()})}]),app.service("MainSvc",["$window",function(e){this.logOut=function(){localStorage.clear(),e.location.href="/#/login"}}]),app.controller("StartCtrl",["$scope","$http","$state","MainSvc",function(e,n,i,o){e.user=localStorage.getItem("username");var t;t=localStorage.getItem("theme"),e.theme="1"==t?1:0,e.toggleTheme=function(){e.theme?e.theme=0:e.theme=1,localStorage.setItem("theme",e.theme),e.$emit("themeEvent"),e.$broadcast("themeEvent")},e.changePasswd=function(){n.post("/changePasswd",{password:e.passwordOld,newPassword:e.passwordNew}).success(function(){Materialize.toast("Hasło zostało zmienione",4e3)}).error(function(){Materialize.toast("Wystąpił błąd",4e3),"Unauthorized"===err&&o.logOut()})}}]),app.config(["$stateProvider",function(e){e.state({name:"start",url:"/start",templateUrl:"../templates/start.html",controller:"StartCtrl"}),e.state({name:"system",url:"/system",templateUrl:"../templates/system.html",controller:"SystemCtrl"}),e.state({name:"bidding",url:"/bidding",templateUrl:"../templates/bidding.html",controller:"BidCtrl"}),e.state({name:"groupManager",url:"/groups",templateUrl:"../templates/groups.html",controller:"GroupCtrl"})}]),app.controller("SystemCtrl",["$scope","$http","$state","ArraySvc","MainSvc",function(t,o,e,u,a){var n=function(){var e=localStorage.getItem("theme");t.theme="1"==e};n(),t.$on("themeEvent",function(){n()}),t.$on("chooseGroupEvent",function(e,n){t.chosenGroup=n._id,r([])}),t.sequence={},t.twoSide=!1,t.currentBidIndex=0,t.auction={bids:[{index:1,value:"pass"},{index:2,value:"x"},{index:3,value:"xx"},{index:4,value:"1club"},{index:5,value:"1diamond"},{index:6,value:"1heart"},{index:7,value:"1spade"},{index:8,value:"1NT"},{index:9,value:"2club"},{index:10,value:"2diamond"},{index:11,value:"2heart"},{index:12,value:"2spade"},{index:13,value:"2NT"},{index:14,value:"3club"},{index:15,value:"3diamond"},{index:16,value:"3heart"},{index:17,value:"3spade"},{index:18,value:"3NT"},{index:19,value:"4club"},{index:20,value:"4diamond"},{index:21,value:"4heart"},{index:22,value:"4spade"},{index:23,value:"4NT"},{index:24,value:"5club"},{index:25,value:"5diamond"},{index:26,value:"5heart"},{index:27,value:"5spade"},{index:28,value:"5NT"},{index:29,value:"6club"},{index:30,value:"6diamond"},{index:31,value:"6heart"},{index:32,value:"6spade"},{index:33,value:"6NT"},{index:34,value:"7club"},{index:35,value:"7diamond"},{index:36,value:"7heart"},{index:37,value:"7spade"},{index:38,value:"7NT"}],addBid:function(e){t.sequence[t.currentBidIndex]=e,1==t.twoSide?t.biddingBox(t.currentBidIndex+1,!0):(t.sequence[t.currentBidIndex+1]=t.auction.bids[0],t.biddingBox(t.currentBidIndex+2,!0)),i(),r(t.sequence)},goToBid:function(e){t.sequence[t.currentBidIndex]=e,0==t.twoSide&&(t.sequence[t.currentBidIndex+1]=t.auction.bids[0],t.currentBidIndex++),t.currentBidIndex++,i(),r(t.sequence)},lastBid:3,canDouble:!1,canRedouble:!1},t.biddingBox=function(e,n){t.currentBidIndex=e,n||(t.showBiddingBox?t.showBiddingBox=!1:t.showBiddingBox=!0);for(var i=e-1,o=3;t.sequence[i];)t.sequence[i].index>o&&(o=t.sequence[i].index),i--;t.auction.currentMinBid=o};var i=function(){if(-1==u.getSize(t.sequence))return t.auction.lastBid=3,t.canDouble=!1,void(t.canRedouble=!1);var e=u.getSize(t.sequence),n=e;for(t.auction.lastBid=t.sequence[e].index;t.sequence[e].index<=3;)if(t.auction.lastBid=t.sequence[e].index,e--,!t.sequence[e])return t.auction.lastBid=3,t.canDouble=!1,void(t.canRedouble=!1);for(t.auction.lastBid=t.sequence[e].index,e=n;1===t.sequence[n].index;)n--;3===t.sequence[n].index?(t.auction.canDouble=!1,t.auction.canRedouble=!1):2===t.sequence[n].index?(t.auction.canDouble=!1,t.auction.canRedouble=n%2==e%2):(t.auction.canRedouble=!1,t.auction.canDouble=n%2==e%2)},r=function(e){for(var n=[],i=0;i<u.getSize(e);i++)n.push(e[i].index);o.get("/api/bid",{headers:{"x-group":t.chosenGroup,"x-sequence":n}}).success(function(e){t.bids=e,t.convSearch=!1}).error(function(e){"Unauthorized"===e&&a.logOut(),t.bids={}})};t.findBidsByConv=function(e){o.get("/api/bidByC",{headers:{"x-group":t.chosenGroup,"x-convention":e}}).success(function(e){t.bids=e,t.convSearch=!0}).error(function(e){"Unauthorized"===e&&a.logOut(),t.bids={}})},t.removeAll=function(){t.sequence={},t.auction.lastBid=3,t.auction.canDouble=!1,t.auction.canRedouble=!1,t.auction.currentMinBid=3,t.biddingBox(0,!0),r(t.sequence)},t.removeLast=function(){if(u.getSize(t.sequence)<0)return Materialize.toast("Licytacja jest już pusta",4e3);if(u.destroyLast(t.sequence),!(u.getSize(t.sequence)<0)){0==t.twoSide&&u.destroyLast(t.sequence),i();var e=u.getSize(t.sequence);-1===e&&(e=0),t.biddingBox(e,!0),r(t.sequence)}},t.toggleTwoSide=function(){0==t.twoSide?t.twoSide=!0:t.twoSide=!1},t.biddingBoxFilter=function(e){if(t.auction.currentMinBid<e.index)return e},$(document).ready(function(){$(".tooltipped").tooltip({delay:50}),$(".modal").modal({complete:function(){}})}),t.chosenGroup&&r([])}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcC5jdHJsLmpzIiwiYXJyYXkuc3ZjLmpzIiwiYmlkZGluZy5jdHJsLmpzIiwiZ3JvdXBzLmN0cmwuanMiLCJtYWluLnN2Yy5qcyIsInN0YXJ0LmN0cmwuanMiLCJzdGF0ZXByb3ZpZGVyLmpzIiwic3lzdGVtLmN0cmwuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkaHR0cCIsIiRzdGF0ZSIsIiR3aW5kb3ciLCJNYWluU3ZjIiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibG9jYXRpb24iLCJocmVmIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwidXNlciIsInVzZXJuYW1lIiwiY2V6YXIiLCIkb24iLCJldmVudCIsIml0ZW0iLCJncm91cHMiLCJwdXNoIiwidGVzdFRoZW1lIiwidGhlbWUiLCJjaG9vc2VHcm91cCIsImdyb3VwIiwiY2hvc2VuR3JvdXAiLCJfaWQiLCJjaG9zZW5Hcm91cE5hbWUiLCJuYW1lIiwiJGJyb2FkY2FzdCIsImxvZ091dCIsImdldCIsInN1Y2Nlc3MiLCJlcnJvciIsImVyciIsImdvIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJzaWRlTmF2IiwiZHJvcGRvd24iLCJpbkR1cmF0aW9uIiwib3V0RHVyYXRpb24iLCJjb25zdHJhaW5XaWR0aCIsImhvdmVyIiwiZ3V0dGVyIiwiYmVsb3dPcmlnaW4iLCJhbGlnbm1lbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJzZXJ2aWNlIiwic3ZjIiwidGhpcyIsImdldFNpemUiLCJhcnJheSIsImkiLCJkZXN0cm95TGFzdCIsInVuZGVmaW5lZCIsIkFycmF5U3ZjIiwiZGF0YSIsImZpbmRCaWRzIiwic2VxdWVuY2UiLCJ0d29TaWRlIiwidmFyS2VlcEF1Y3Rpb24iLCJkZXNjcmlwdGlvbiIsInRvQmVVcGRhdGVkIiwiYXVjdGlvbiIsImJpZHMiLCJpbmRleCIsInZhbHVlIiwiYWRkQmlkIiwiYmlkIiwiY3VycmVudEJpZEluZGV4IiwiYmlkZGluZ0JveCIsImdldExhc3RCaWQiLCJsYXN0QmlkIiwiY2FuRG91YmxlIiwiY2FuUmVkb3VibGUiLCJCaWQiLCJjb252ZW50aW9uIiwidG1wIiwidG9TdHJpbmciLCJlbnRyaWVzIiwidXBkYXRlcyIsImxlbmd0aCIsIm5ld0JpZCIsInBvc3QiLCJyZXMiLCJNYXRlcmlhbGl6ZSIsInRvYXN0IiwidXBkYXRlQmlkc1JlcXVlc3QiLCJjbGVhbnVwIiwiYmlkQWxyZWFkeUV4aXN0cyIsImF1dG8iLCJzaG93QmlkZGluZ0JveCIsIm1heGkiLCJjdXJyZW50TWluQmlkIiwiaiIsIngtZ3JvdXAiLCJ4LXNlcXVlbmNlIiwicmVtb3ZlQWxsIiwiaW5zZXJ0Q29sb3IiLCJzaWduIiwid2hlcmUiLCJnZXRFbGVtZW50QnlJZCIsImZvY3VzIiwicmVtb3ZlTGFzdCIsInRvZ2dsZUtlZXBBdWN0aW9uIiwidG9nZ2xlVHdvU2lkZSIsImJpZGRpbmdCb3hGaWx0ZXIiLCJiaWRzRmlsdGVyIiwidG9vbHRpcCIsImRlbGF5IiwibW9kYWwiLCJjb21wbGV0ZSIsImlkIiwiYWRkR3JvdXAiLCJuZXdUZWFtTmFtZSIsIm5ld1RlYW1EZXNjcmlwdGlvbiIsInVzZXJzIiwiYWRtaW5zIiwiJGVtaXQiLCJhZGRVc2VyVG9Hcm91cCIsInVybCIsIm9iaiIsIm9wZW5lZEdyb3VwIiwicmVtb3ZlVXNlckZyb21Hcm91cCIsImdldEdyb3VwcyIsIm9wZW5Hcm91cCIsImFkZFVzZXJUb0FkbWlucyIsImNoZWNrSWZBZG1pbiIsImxlbiIsInJlbW92ZVVzZXJGcm9tQWRtaW5zIiwib3BlbkNlemFyIiwibGluayIsIm9wZW4iLCJyZXNvbHZlVXNlcnMiLCJjbGVhciIsInRvZ2dsZVRoZW1lIiwic2V0SXRlbSIsImNoYW5nZVBhc3N3ZCIsInBhc3N3b3JkIiwicGFzc3dvcmRPbGQiLCJuZXdQYXNzd29yZCIsInBhc3N3b3JkTmV3IiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsInRlbXBsYXRlVXJsIiwiZ29Ub0JpZCIsImNvbnZTZWFyY2giLCJmaW5kQmlkc0J5Q29udiIsIngtY29udmVudGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsSUFBQUMsUUFBQUMsT0FBQSxzQkFDQSxjQ0RBRixJQUFBRyxXQUFBLFdBQUEsU0FBQSxRQUFBLFNBQUEsVUFBQSxVQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsYUFBQUMsUUFBQSxTQUNBRixJQUFBRixFQUFBSyxTQUFBQyxLQUFBLFlBQ0FSLEVBQUFTLFNBQUFDLFFBQUFDLE9BQUEsVUFBQVAsRUFDQUwsRUFBQWEsTUFDQUMsU0FBQVIsYUFBQUMsUUFBQSxZQUNBUSxNQUFBVCxhQUFBQyxRQUFBLFVBRUFQLEVBQUFnQixJQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEdBQ0FsQixFQUFBbUIsT0FBQUMsS0FBQUYsS0FFQSxJQUFBRyxFQUFBLFdBQ0EsSUFBQUMsRUFBQWhCLGFBQUFDLFFBQUEsU0FDQVAsRUFBQXNCLE1BQUEsS0FBQUEsR0FHQUQsSUFDQXJCLEVBQUFnQixJQUFBLGFBQUEsV0FDQUssTUFFQXJCLEVBQUF1QixZQUFBLFNBQUFDLEdBQ0F4QixFQUFBeUIsWUFBQUQsRUFBQUUsSUFDQTFCLEVBQUEyQixnQkFBQUgsRUFBQUksS0FDQTVCLEVBQUE2QixXQUFBLG1CQUFBTCxJQUVBeEIsRUFBQThCLE9BQUEsV0FDQTFCLEVBQUEwQixVQUdBN0IsRUFBQThCLElBQUEsZUFBQUMsUUFBQSxTQUFBYixHQUNBbkIsRUFBQW1CLE9BQUFBLElBQ0FjLE1BQUEsU0FBQUMsR0FDQSxpQkFBQUEsR0FBQTlCLEVBQUEwQixTQUNBOUIsRUFBQW1CLFlBSUFqQixFQUFBaUMsR0FBQSxTQUNBQyxFQUFBQyxVQUFBQyxNQUFBLFdBQ0FGLEVBQUEsb0JBQUFHLFVBQ0FILEVBQUEsb0JBQUFJLFVBQ0FDLFdBQUEsSUFDQUMsWUFBQSxJQUNBQyxnQkFBQSxFQUNBQyxPQUFBLEVBQ0FDLE9B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QUFDLE1BQUEsTUFDQUQsTUFBQSxFQUFBQyxNQUFBLE9BQ0FELE1BQUEsRUFBQUMsTUFBQSxVQUNBRCxNQUFBLEVBQUFDLE1BQUEsYUFDQUQsTUFBQSxFQUFBQyxNQUFBLFdBQ0FELE1BQUEsRUFBQUMsTUFBQSxXQUNBRCxNQUFBLEVBQUFDLE1BQUEsUUFDQUQsTUFBQSxFQUFBQyxNQUFBLFVBQ0FELE1BQUEsR0FBQUMsTUFBQSxhQUNBRCxNQUFBLEdBQUFDLE1BQUEsV0FDQUQsTUFBQSxHQUFBQyxNQUFBLFdBQ0FELE1BQUEsR0FBQUMsTUFBQSxRQUNBRCxNQUFBLEdBQUFDLE1BQUEsVUFDQUQsTUFBQSxHQUFBQyxNQUFBLGFBQ0FELE1BQUEsR0FBQUMsTUFBQSxXQUNBRCxNQUFBLEdBQUFDLE1BQUEsV0FDQUQsTUFBQSxHQUFBQyxNQUFBLFFBQ0FELE1BQUEsR0FBQUMsTUFBQSxVQUNBRCxNQUFBLEdBQUFDLE1BQUEsYUFDQUQsTUFBQSxHQUFBQyxNQUFBLFdBQ0FELE1BQUEsR0FBQUMsTUFBQSxXQUNBRCxNQUFBLEdBQUFDLE1BQUEsUUFDQUQsTUFBQSxHQUFBQyxNQUFBLFVBQ0FELE1BQUEsR0FBQUMsTUFBQSxhQUNBRCxNQUFBLEdBQUFDLE1BQUEsV0FDQUQsTUFBQSxHQUFBQyxNQUFBLFdBQ0FELE1BQUEsR0FBQUMsTUFBQSxRQUNBRCxNQUFBLEdBQUFDLE1BQUEsVUFDQUQsTUFBQSxHQUFBQyxNQUFBLGFBQ0FELE1BQUEsR0FBQUMsTUFBQSxXQUNBRCxNQUFBLEdBQUFDLE1BQUEsV0FDQUQsTUFBQSxHQUFBQyxNQUFBLFFBQ0FELE1BQUEsR0FBQUMsTUFBQSxVQUNBRCxNQUFBLEdBQUFDLE1BQUEsYUFDQUQsTUFBQSxHQUFBQyxNQUFBLFdBQ0FELE1BQUEsR0FBQUMsTUFBQSxXQUNBRCxNQUFBLEdBQUFDLE1BQUEsUUFFQUMsT0FBQSxTQUFBQyxHQUNBdEUsRUFBQTRELFNBQUE1RCxFQUFBdUUsaUJBQUFELEVBQ0EsR0FBQXRFLEVBQUE2RCxRQUNBN0QsRUFBQXdFLFdBQUF4RSxFQUFBdUUs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QUNBbEUsRUFBQXFKLFlBQUEsSUFDQXBILE1BQUEsU0FBQUMsR0FDQSxpQkFBQUEsR0FBQTlCLEVBQUEwQixTQUNBOUIsRUFBQWtFLFdBSUFsRSxFQUFBbUcsVUFBQSxXQUNBbkcsRUFBQTRELFlBQ0E1RCxFQUFBaUUsUUFBQVMsUUFBQSxFQUNBMUUsRUFBQWlFLFFBQUFVLFdBQUEsRUFDQTNFLEVBQUFpRSxRQUFBVyxhQUFBLEVBQ0E1RSxFQUFBaUUsUUFBQThCLGNBQUEsRUFDQS9GLEVBQUF3RSxXQUFBLEdBQUEsR0FDQWIsRUFBQTNELEVBQUE0RCxXQUVBNUQsRUFBQXlHLFdBQUEsV0FDQSxHQUFBaEQsRUFBQUwsUUFBQXBELEVBQUE0RCxVQUFBLEVBQUEsT0FBQTJCLFlBQUFDLE1BQUEsMkJBQUEsS0FFQSxHQURBL0IsRUFBQUYsWUFBQXZELEVBQUE0RCxZQUNBSCxFQUFBTCxRQUFBcEQsRUFBQTRELFVBQUEsR0FBQSxDQUNBLEdBQUE1RCxFQUFBNkQsU0FDQUosRUFBQUYsWUFBQXZELEVBQUE0RCxVQUVBYSxJQUNBLElBQUFuQixFQUFBRyxFQUFBTCxRQUFBcEQsRUFBQTRELFdBQ0EsSUFBQU4sSUFBQUEsRUFBQSxHQUNBdEQsRUFBQXdFLFdBQUFsQixHQUFBLEdBQ0FLLEVBQUEzRCxFQUFBNEQsWUFFQTVELEVBQUEyRyxjQUFBLFdBQ0EsR0FBQTNHLEVBQUE2RCxRQUNBN0QsRUFBQTZELFNBQUEsRUFFQTdELEVBQUE2RCxTQUFBLEdBS0E3RCxFQUFBNEcsaUJBQUEsU0FBQTFGLEdBQ0EsR0FBQWxCLEVBQUFpRSxRQUFBOEIsY0FBQTdFLEVBQUFpRCxNQUFBLE9BQUFqRCxHQUtBa0IsRUFBQUMsVUFBQUMsTUFBQSxXQUNBRixFQUFBLGVBQUEwRSxTQUFBQyxNQUFBLEtBQ0EzRSxFQUFBLFVBQUE0RSxPQUNBQyxTQUFBLGlCQUlBakgsRUFBQXlCLGFBQUFrQyIsImZpbGUiOiJhcHAtYXV0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQnJpZGdlU3lzdGVtT25saW5lJyxcbiAgWyd1aS5yb3V0ZXInXVxuKTtcbiIsImFwcC5jb250cm9sbGVyKCdBcHBDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHN0YXRlLCAkd2luZG93LCBNYWluU3ZjKSB7XG4gIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xuICBpZighdG9rZW4pICR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvIy9sb2dpbic7XG4gICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyd4LWF1dGgnXSA9IHRva2VuO1xuICAkc2NvcGUudXNlciA9IHtcbiAgICB1c2VybmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJuYW1lJyksXG4gICAgY2V6YXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjZXphcicpXG4gIH1cbiAgJHNjb3BlLiRvbignbmV3R3JvdXBFdmVudCcsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7XG4gICAgJHNjb3BlLmdyb3Vwcy5wdXNoKGl0ZW0pO1xuICB9KVxuICB2YXIgdGVzdFRoZW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG4gICAgaWYodGhlbWU9PScxJykgJHNjb3BlLnRoZW1lID0gdHJ1ZTtcbiAgICBlbHNlICRzY29wZS50aGVtZSA9IGZhbHNlO1xuICB9XG4gIHRlc3RUaGVtZSgpO1xuICAkc2NvcGUuJG9uKCd0aGVtZUV2ZW50JywgZnVuY3Rpb24oKSB7XG4gICAgdGVzdFRoZW1lKCk7XG4gIH0pXG4gICRzY29wZS5jaG9vc2VHcm91cCA9IGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgJHNjb3BlLmNob3Nlbkdyb3VwID0gZ3JvdXAuX2lkO1xuICAgICRzY29wZS5jaG9zZW5Hcm91cE5hbWUgPSBncm91cC5uYW1lO1xuICAgICRzY29wZS4kYnJvYWRjYXN0KCdjaG9vc2VHcm91cEV2ZW50JywgZ3JvdXApO1xuICB9XG4gICRzY29wZS5sb2dPdXQgPSBmdW5jdGlvbigpIHtcbiAgICBNYWluU3ZjLmxvZ091dCgpO1xuICB9XG4gIHZhciBnZXRHcm91cHMgPSBmdW5jdGlvbigpIHtcbiAgICAkaHR0cC5nZXQoJy9hcGkvZ3JvdXBzJykuc3VjY2VzcyhmdW5jdGlvbihncm91cHMpIHtcbiAgICAgICRzY29wZS5ncm91cHMgPSBncm91cHM7XG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZihlcnI9PT1cIlVuYXV0aG9yaXplZFwiKSBNYWluU3ZjLmxvZ091dCgpO1xuICAgICAgJHNjb3BlLmdyb3VwcyA9IHt9O1xuICAgIH0pXG4gIH1cbiAgZ2V0R3JvdXBzKCk7XG4gICRzdGF0ZS5nbygnc3RhcnQnKTtcbiAgJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkKFwiLmJ1dHRvbi1jb2xsYXBzZVwiKS5zaWRlTmF2KCk7XG4gICAgJCgnLmRyb3Bkb3duLWJ1dHRvbicpLmRyb3Bkb3duKHtcbiAgICAgICAgaW5EdXJhdGlvbjogMzAwLFxuICAgICAgICBvdXREdXJhdGlvbjogMjI1LFxuICAgICAgICBjb25zdHJhaW5XaWR0aDogZmFsc2UsIC8vIERvZXMgbm90IGNoYW5nZSB3aWR0aCBvZiBkcm9wZG93biB0byB0aGF0IG9mIHRoZSBhY3RpdmF0b3JcbiAgICAgICAgaG92ZXI6IGZhbHNlLCAvLyBBY3RpdmF0ZSBvbiBob3ZlclxuICAgICAgICBndXR0ZXI6IDAsIC8vIFNwYWNpbmcgZnJvbSBlZGdlXG4gICAgICAgIGJlbG93T3JpZ2luOiB0cnVlLCAvLyBEaXNwbGF5cyBkcm9wZG93biBiZWxvdyB0aGUgYnV0dG9uXG4gICAgICAgIGFsaWdubWVudDogJ2xlZnQnLCAvLyBEaXNwbGF5cyBkcm9wZG93biB3aXRoIGVkZ2UgYWxpZ25lZCB0byB0aGUgbGVmdCBvZiBidXR0b25cbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiB0cnVlIC8vIFN0b3BzIGV2ZW50IHByb3BhZ2F0aW9uXG4gICAgICB9XG4gICAgKTt9KVxuXG5cblxufSlcbiIsImFwcC5zZXJ2aWNlKCdBcnJheVN2YycsIGZ1bmN0aW9uKCkge1xuICB2YXIgc3ZjID0gdGhpc1xuICBzdmMuZ2V0U2l6ZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlKGFycmF5W2ldKSBpKys7XG4gICAgaS0tO1xuICAgIHJldHVybiBpO1xuICB9XG4gIHN2Yy5kZXN0cm95TGFzdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGkgPSBzdmMuZ2V0U2l6ZShhcnJheSk7XG4gICAgYXJyYXlbaV0gPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ0JpZEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUsIEFycmF5U3ZjLCBNYWluU3ZjKXtcblxuICB2YXIgdGVzdFRoZW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG4gICAgaWYodGhlbWU9PScxJykgJHNjb3BlLnRoZW1lID0gdHJ1ZTtcbiAgICBlbHNlICRzY29wZS50aGVtZSA9IGZhbHNlO1xuICB9XG4gIHRlc3RUaGVtZSgpO1xuICAkc2NvcGUuJG9uKCd0aGVtZUV2ZW50JywgZnVuY3Rpb24oKSB7XG4gICAgdGVzdFRoZW1lKCk7XG4gIH0pXG4gICRzY29wZS4kb24oJ2Nob29zZUdyb3VwRXZlbnQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkge1xuICAgICRzY29wZS5jaG9zZW5Hcm91cCA9IGRhdGEuX2lkO1xuICAgIGZpbmRCaWRzKFtdKVxuICB9KVxuICAkc2NvcGUuc2VxdWVuY2UgPSB7fVxuICAkc2NvcGUudHdvU2lkZSA9IGZhbHNlO1xuICAkc2NvcGUudmFyS2VlcEF1Y3Rpb24gPSBmYWxzZTtcbiAgJHNjb3BlLmRlc2NyaXB0aW9uID0gW107XG4gICRzY29wZS50b0JlVXBkYXRlZCA9IFtdO1xuXG4gICRzY29wZS5hdWN0aW9uID0ge1xuICAgIGJpZHM6IFtcbiAgICAgIHtcImluZGV4XCI6IDEsIFwidmFsdWVcIjogXCJwYXNzXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMiwgXCJ2YWx1ZVwiOiBcInhcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzLCBcInZhbHVlXCI6IFwieHhcIn0sXG4gICAgICB7XCJpbmRleFwiOiA0LCBcInZhbHVlXCI6IFwiMWNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiA1LCBcInZhbHVlXCI6IFwiMWRpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiA2LCBcInZhbHVlXCI6IFwiMWhlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogNywgXCJ2YWx1ZVwiOiBcIjFzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDgsIFwidmFsdWVcIjogXCIxTlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiA5LCBcInZhbHVlXCI6IFwiMmNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxMCwgXCJ2YWx1ZVwiOiBcIjJkaWFtb25kXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTEsIFwidmFsdWVcIjogXCIyaGVhcnRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxMiwgXCJ2YWx1ZVwiOiBcIjJzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDEzLCBcInZhbHVlXCI6IFwiMk5UXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTQsIFwidmFsdWVcIjogXCIzY2x1YlwifSxcbiAgICAgIHtcImluZGV4XCI6IDE1LCBcInZhbHVlXCI6IFwiM2RpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxNiwgXCJ2YWx1ZVwiOiBcIjNoZWFydFwifSxcbiAgICAgIHtcImluZGV4XCI6IDE3LCBcInZhbHVlXCI6IFwiM3NwYWRlXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTgsIFwidmFsdWVcIjogXCIzTlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxOSwgXCJ2YWx1ZVwiOiBcIjRjbHViXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjAsIFwidmFsdWVcIjogXCI0ZGlhbW9uZFwifSxcbiAgICAgIHtcImluZGV4XCI6IDIxLCBcInZhbHVlXCI6IFwiNGhlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjIsIFwidmFsdWVcIjogXCI0c3BhZGVcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyMywgXCJ2YWx1ZVwiOiBcIjROVFwifSxcbiAgICAgIHtcImluZGV4XCI6IDI0LCBcInZhbHVlXCI6IFwiNWNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyNSwgXCJ2YWx1ZVwiOiBcIjVkaWFtb25kXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjYsIFwidmFsdWVcIjogXCI1aGVhcnRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyNywgXCJ2YWx1ZVwiOiBcIjVzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDI4LCBcInZhbHVlXCI6IFwiNU5UXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjksIFwidmFsdWVcIjogXCI2Y2x1YlwifSxcbiAgICAgIHtcImluZGV4XCI6IDMwLCBcInZhbHVlXCI6IFwiNmRpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzMSwgXCJ2YWx1ZVwiOiBcIjZoZWFydFwifSxcbiAgICAgIHtcImluZGV4XCI6IDMyLCBcInZhbHVlXCI6IFwiNnNwYWRlXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzMsIFwidmFsdWVcIjogXCI2TlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzNCwgXCJ2YWx1ZVwiOiBcIjdjbHViXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzUsIFwidmFsdWVcIjogXCI3ZGlhbW9uZFwifSxcbiAgICAgIHtcImluZGV4XCI6IDM2LCBcInZhbHVlXCI6IFwiN2hlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzcsIFwidmFsdWVcIjogXCI3c3BhZGVcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzOCwgXCJ2YWx1ZVwiOiBcIjdOVFwifVxuICAgIF0sXG4gICAgYWRkQmlkOiBmdW5jdGlvbihiaWQpIHtcbiAgICAgICRzY29wZS5zZXF1ZW5jZVskc2NvcGUuY3VycmVudEJpZEluZGV4XSA9IGJpZDtcbiAgICAgIGlmKCRzY29wZS50d29TaWRlPT10cnVlKSB7XG4gICAgICAgICRzY29wZS5iaWRkaW5nQm94KCRzY29wZS5jdXJyZW50QmlkSW5kZXgrMSwgdHJ1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5zZXF1ZW5jZVskc2NvcGUuY3VycmVudEJpZEluZGV4KzFdID0gJHNjb3BlLmF1Y3Rpb24uYmlkc1swXVxuICAgICAgICAkc2NvcGUuYmlkZGluZ0JveCgkc2NvcGUuY3VycmVudEJpZEluZGV4KzIsIHRydWUpXG4gICAgICB9XG4gICAgICBnZXRMYXN0QmlkKCk7XG4gICAgICBmaW5kQmlkcygkc2NvcGUuc2VxdWVuY2UpXG4gICAgfSxcbiAgICBsYXN0QmlkOiAzLFxuICAgIGNhbkRvdWJsZTogZmFsc2UsXG4gICAgY2FuUmVkb3VibGU6IGZhbHNlXG4gIH1cbiAgJHNjb3BlLmFkZEJpZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBCaWQgPSBmdW5jdGlvbihiaWQsIGRlc2NyaXB0aW9uLCBzZXF1ZW5jZSwgdHdvU2lkZSwgY29udmVudGlvbikge1xuICAgICAgdGhpcy5iaWQgPSBiaWQuaW5kZXg7XG4gICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICB0aGlzLnNlcXVlbmNlID0gc2VxdWVuY2U7XG4gICAgICB0aGlzLnR3b1NpZGUgPSB0d29TaWRlO1xuICAgIH1cbiAgICB2YXIgdG1wID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBBcnJheVN2Yy5nZXRTaXplKCRzY29wZS5zZXF1ZW5jZSk7IGkrKykge1xuICAgICAgdG1wLnB1c2goJHNjb3BlLnNlcXVlbmNlW2ldLmluZGV4LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB2YXIgZW50cmllcyA9IFtdO1xuICAgIHZhciB1cGRhdGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUuZGVzY3JpcHRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKCRzY29wZS5kZXNjcmlwdGlvbltpXSAmJiAkc2NvcGUuZGVzY3JpcHRpb25baV0uZGVzY3JpcHRpb24gJiYgJHNjb3BlLmRlc2NyaXB0aW9uW2ldLmRlc2NyaXB0aW9uIT09JycpIHtcbiAgICAgICAgaWYoaT49JHNjb3BlLmF1Y3Rpb24ubGFzdEJpZCB8fCBpPDQpIHtcbiAgICAgICAgICB2YXIgYmlkID0gJHNjb3BlLmF1Y3Rpb24uYmlkc1tpLTFdO1xuICAgICAgICAgIHZhciBuZXdCaWQgPSBuZXcgQmlkKGJpZCwgJHNjb3BlLmRlc2NyaXB0aW9uW2ldLmRlc2NyaXB0aW9uLCB0bXAsICRzY29wZS50d29TaWRlKTtcbiAgICAgICAgICBpZigkc2NvcGUuZGVzY3JpcHRpb25baV0udG9CZVVwZGF0ZWQpIHtcbiAgICAgICAgICAgIG5ld0JpZC5faWQgPSAkc2NvcGUuZGVzY3JpcHRpb25baV0udG9CZVVwZGF0ZWQ7XG4gICAgICAgICAgICB1cGRhdGVzLnB1c2gobmV3QmlkKTtcbiAgICAgICAgICB9IGVsc2UgZW50cmllcy5wdXNoKG5ld0JpZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYoZW50cmllc1swXSkge1xuICAgICAgJGh0dHAucG9zdCgnL2FwaS9iaWRzJywge1xuICAgICAgICBjaG9zZW5Hcm91cDogJHNjb3BlLmNob3Nlbkdyb3VwLFxuICAgICAgICBlbnRyaWVzOiBlbnRyaWVzLFxuICAgICAgICBjb252ZW50aW9uOiAkc2NvcGUuY29udmVudGlvblxuICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ0RvZGFubyBvZHp5d2tpJywgNDAwMCk7XG4gICAgICAgIGlmKHVwZGF0ZXNbMF0pIHVwZGF0ZUJpZHNSZXF1ZXN0KHVwZGF0ZXMpO1xuICAgICAgICBlbHNlIGNsZWFudXAoKTtcbiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZihlcnI9PT1cIlVuYXV0aG9yaXplZFwiKSBNYWluU3ZjLmxvZ091dCgpO1xuICAgICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnV3lzdMSFcGnFgiBixYLEhWQnLCA0MDAwKVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYodXBkYXRlc1swXSkgdXBkYXRlQmlkc1JlcXVlc3QodXBkYXRlcyk7XG4gIH1cblxuXG4gICRzY29wZS5iaWRBbHJlYWR5RXhpc3RzID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICBpZighJHNjb3BlLmRlc2NyaXB0aW9uW2luZGV4XSkgJHNjb3BlLmRlc2NyaXB0aW9uW2luZGV4XSA9IHt9O1xuICAgICRzY29wZS5kZXNjcmlwdGlvbltpbmRleF0udG9CZVVwZGF0ZWQgPSBmYWxzZTtcbiAgICBpZiAoISRzY29wZS5iaWRzIHx8ICEkc2NvcGUuYmlkc1swXSkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmJpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKCRzY29wZS5iaWRzW2ldLmJpZD09aW5kZXgpIHtcbiAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uW2luZGV4XS50b0JlVXBkYXRlZCA9ICRzY29wZS5iaWRzW2ldLl9pZDtcbiAgICAgICAgcmV0dXJuICRzY29wZS5iaWRzW2ldLmRlc2NyaXB0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAkc2NvcGUuYmlkZGluZ0JveCA9IGZ1bmN0aW9uKGluZGV4LCBhdXRvKSB7XG4gICAgJHNjb3BlLmN1cnJlbnRCaWRJbmRleCA9IGluZGV4XG4gICAgaWYoIWF1dG8pIHtcbiAgICAgIGlmKCRzY29wZS5zaG93QmlkZGluZ0JveCkgJHNjb3BlLnNob3dCaWRkaW5nQm94ID0gZmFsc2U7XG4gICAgICBlbHNlICRzY29wZS5zaG93QmlkZGluZ0JveCA9IHRydWU7XG4gICAgfVxuICAgIHZhciBpID0gaW5kZXgtMTtcbiAgICB2YXIgbWF4aSA9IDM7XG4gICAgd2hpbGUgKCRzY29wZS5zZXF1ZW5jZVtpXSkge1xuICAgICAgICBpZigkc2NvcGUuc2VxdWVuY2VbaV0uaW5kZXg+bWF4aSkgbWF4aSA9ICRzY29wZS5zZXF1ZW5jZVtpXS5pbmRleDtcbiAgICAgICAgaS0tO1xuICAgIH1cbiAgICAkc2NvcGUuYXVjdGlvbi5jdXJyZW50TWluQmlkID0gbWF4aTtcbiAgfVxuXG4gIHZhciBnZXRMYXN0QmlkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYoQXJyYXlTdmMuZ2V0U2l6ZSgkc2NvcGUuc2VxdWVuY2UpPT0tMSkge1xuICAgICAgJHNjb3BlLmF1Y3Rpb24ubGFzdEJpZCA9IDM7XG4gICAgICAkc2NvcGUuY2FuRG91YmxlPWZhbHNlO1xuICAgICAgJHNjb3BlLmNhblJlZG91YmxlPWZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnRpbmcgZW1wdHkgc2VxdWVuY2VcbiAgICB2YXIgaSA9IEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKSwgaiA9IGk7ICAgICAvLyBnZXR0aW5nIHNpemUgb2Ygc2VxdWVuY2VcbiAgICAkc2NvcGUuYXVjdGlvbi5sYXN0QmlkID0gJHNjb3BlLnNlcXVlbmNlW2ldLmluZGV4O1xuICAgIHdoaWxlKCRzY29wZS5zZXF1ZW5jZVtpXS5pbmRleCA8PSAzKSB7ICAgICAgICAgICAgICAgIC8vIHNlYXJjaGluZyBmb3IgdGhlIGxhc3Qgbm9uLXBhc3MveC94eCBiaWRcbiAgICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAkc2NvcGUuc2VxdWVuY2VbaV0uaW5kZXg7XG4gICAgICBpLS07XG4gICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm93IGkgY29udGFpbnMgaXRzIGluZGV4XG4gICAgaWYoISRzY29wZS5zZXF1ZW5jZVtpXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGVyZSBhcmUgb25seSBwYXNzc2VzXG4gICAgICAkc2NvcGUuYXVjdGlvbi5sYXN0QmlkID0gMztcbiAgICAgICRzY29wZS5jYW5Eb3VibGU9ZmFsc2U7XG4gICAgICAkc2NvcGUuY2FuUmVkb3VibGU9ZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAkc2NvcGUuc2VxdWVuY2VbaV0uaW5kZXg7XG4gICAgaT1qOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaSBlcXVhbHMgc2l6ZSBvZiBzZXF1ZW5jZSBvbmNlIGFnYWluXG4gICAgd2hpbGUoJHNjb3BlLnNlcXVlbmNlW2pdLmluZGV4PT09MSkge2otLTt9ICAgICAgICAgICAgLy8gbm93IHNlYXJjaGluZyBmb3IgdGhlIGxhc3Qgbm9uLXBhc3MgYmlkXG4gICAgaWYoJHNjb3BlLnNlcXVlbmNlW2pdLmluZGV4PT09MykgeyAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBhIHJlZG91YmxlXG4gICAgICAkc2NvcGUuYXVjdGlvbi5jYW5Eb3VibGU9ZmFsc2U7XG4gICAgICAkc2NvcGUuYXVjdGlvbi5jYW5SZWRvdWJsZT1mYWxzZTtcbiAgICB9ZWxzZSBpZigkc2NvcGUuc2VxdWVuY2Vbal0uaW5kZXg9PT0yKSB7ICAgICAgICAgICAgICAvLyBpZiBpdCdzIGEgZG91YmxlXG4gICAgICAkc2NvcGUuYXVjdGlvbi5jYW5Eb3VibGU9ZmFsc2VcbiAgICAgIGlmKGolMj09aSUyKSAkc2NvcGUuYXVjdGlvbi5jYW5SZWRvdWJsZT10cnVlOyAgICAgICAvLyBhbmQgaWYgaXQncyBiZWVuIHBsYXllZCBieSB0aGUgb3Bwb3NpdGUgc2lkZVxuICAgICAgZWxzZSAkc2NvcGUuYXVjdGlvbi5jYW5SZWRvdWJsZT1mYWxzZTtcbiAgICB9ZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIGFueSBvdGhlciBiaWRcbiAgICAgICRzY29wZS5hdWN0aW9uLmNhblJlZG91YmxlPWZhbHNlO1xuICAgICAgaWYoaiUyPT1pJTIpICRzY29wZS5hdWN0aW9uLmNhbkRvdWJsZT10cnVlOyAgICAgICAgIC8vIHRoYXQgaGFzIGJlZW4gcGxheWVkIGJ5IHRoZSBvcHBvc2l0ZSBzaWRlXG4gICAgICBlbHNlICRzY29wZS5hdWN0aW9uLmNhbkRvdWJsZT1mYWxzZTtcbiAgICB9XG4gIH1cbiAgdmFyIGZpbmRCaWRzID0gZnVuY3Rpb24oc2VxdWVuY2UpIHtcbiAgICB2YXIgdG1wID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBBcnJheVN2Yy5nZXRTaXplKHNlcXVlbmNlKTsgaSsrKSB7XG4gICAgICB0bXAucHVzaChzZXF1ZW5jZVtpXS5pbmRleCk7XG4gICAgfVxuICAgICRodHRwLmdldCgnL2FwaS9iaWQnLCB7XG4gICAgICBoZWFkZXJzOiB7J3gtZ3JvdXAnOiAkc2NvcGUuY2hvc2VuR3JvdXAsICd4LXNlcXVlbmNlJzogdG1wfVxuICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oYmlkcykge1xuICAgICAgJHNjb3BlLmJpZHMgPSBiaWRzXG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZihlcnI9PT1cIlVuYXV0aG9yaXplZFwiKSBNYWluU3ZjLmxvZ091dDtcbiAgICAgICRzY29wZS5iaWRzID0ge307XG4gICAgfSlcbiAgfVxuICB2YXIgdXBkYXRlQmlkc1JlcXVlc3QgPSBmdW5jdGlvbih1cGRhdGVzKSB7XG4gICAgJGh0dHAucG9zdCgnL2FwaS91cEJpZHMnLCB7XG4gICAgICBjaG9zZW5Hcm91cDogJHNjb3BlLmNob3Nlbkdyb3VwLFxuICAgICAgdXBkYXRlczogdXBkYXRlc1xuICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdaYWt0dWFsaXpvd2FubyBvZHp5d2tpJywgNDAwMCk7XG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZihlcnI9PT1cIlVuYXV0aG9yaXplZFwiKSBNYWluU3ZjLmxvZ091dCgpO1xuICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1d5c3TEhXBpxYIgYsWCxIVkJywgNDAwMCk7XG4gICAgfSlcbiAgfVxuICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5kZXNjcmlwdGlvbiA9IFtdO1xuICAgICRzY29wZS5jb252ZW50aW9uID0gJyc7XG4gICAgaWYoJHNjb3BlLnZhcktlZXBBdWN0aW9uPT1mYWxzZSkgJHNjb3BlLnJlbW92ZUFsbCgpO1xuICAgIGZpbmRCaWRzKCRzY29wZS5zZXF1ZW5jZSk7XG4gIH1cblxuICAvLyBOT1QgSU5URVJFU1RJTkcgRlVOQ1RJT05TOlxuICAkc2NvcGUuaW5zZXJ0Q29sb3IgPSBmdW5jdGlvbihzaWduLCB3aGVyZSkge1xuICAgIGlmKCEkc2NvcGUuZGVzY3JpcHRpb25bd2hlcmVdKSAkc2NvcGUuZGVzY3JpcHRpb25bd2hlcmVdID0ge307XG4gICAgaWYoISRzY29wZS5kZXNjcmlwdGlvblt3aGVyZV0uZGVzY3JpcHRpb24pICRzY29wZS5kZXNjcmlwdGlvblt3aGVyZV0uZGVzY3JpcHRpb24gPSAnJztcbiAgICBzd2l0Y2ggKHNpZ24pIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uW3doZXJlXS5kZXNjcmlwdGlvbis9ICfimaMnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uW3doZXJlXS5kZXNjcmlwdGlvbis9ICfimaYnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uW3doZXJlXS5kZXNjcmlwdGlvbis9ICfimaUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uW3doZXJlXS5kZXNjcmlwdGlvbis9ICfimaAnO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IE1hdGVyaWFsaXplLnRvYXN0KCdXeXN0xIVwacWCIGLFgsSFZCcsIDQwMDApXG4gICAgfVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHdoZXJlKS5mb2N1cygpO1xuICB9XG4gICRzY29wZS5yZW1vdmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2VxdWVuY2UgPSB7fVxuICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAzO1xuICAgICRzY29wZS5hdWN0aW9uLmNhbkRvdWJsZSA9IGZhbHNlO1xuICAgICRzY29wZS5hdWN0aW9uLmNhblJlZG91YmxlID0gZmFsc2U7XG4gICAgJHNjb3BlLmF1Y3Rpb24uY3VycmVudE1pbkJpZCA9IDM7XG4gICAgJHNjb3BlLmJpZGRpbmdCb3goMCwgdHJ1ZSk7XG4gICAgZmluZEJpZHMoJHNjb3BlLnNlcXVlbmNlKTs7XG4gIH1cbiAgJHNjb3BlLnJlbW92ZUxhc3QgPSBmdW5jdGlvbigpIHtcbiAgICBpZihBcnJheVN2Yy5nZXRTaXplKCRzY29wZS5zZXF1ZW5jZSk8MCkgcmV0dXJuIE1hdGVyaWFsaXplLnRvYXN0KCdMaWN5dGFjamEgamVzdCBqdcW8IHB1c3RhJywgNDAwMCk7XG4gICAgQXJyYXlTdmMuZGVzdHJveUxhc3QoJHNjb3BlLnNlcXVlbmNlKVxuICAgIGlmKEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKTwwKSByZXR1cm47XG4gICAgaWYoJHNjb3BlLnR3b1NpZGU9PWZhbHNlKSB7XG4gICAgICBBcnJheVN2Yy5kZXN0cm95TGFzdCgkc2NvcGUuc2VxdWVuY2UpXG4gICAgfVxuICAgIGdldExhc3RCaWQoKTtcbiAgICB2YXIgaSA9IEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKTtcbiAgICBpZihpPT09LTEpIGkgPSAwO1xuICAgICRzY29wZS5iaWRkaW5nQm94KGksIHRydWUpO1xuICAgIGZpbmRCaWRzKCRzY29wZS5zZXF1ZW5jZSk7XG4gIH1cbiAgJHNjb3BlLnRvZ2dsZUtlZXBBdWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYoJHNjb3BlLnZhcktlZXBBdWN0aW9uID09IGZhbHNlKSB7XG4gICAgICAkc2NvcGUudmFyS2VlcEF1Y3Rpb24gPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS52YXJLZWVwQXVjdGlvbiA9IGZhbHNlXG4gICAgfVxuICB9XG4gICRzY29wZS50b2dnbGVUd29TaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYoJHNjb3BlLnR3b1NpZGU9PWZhbHNlKSB7XG4gICAgICAkc2NvcGUudHdvU2lkZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnR3b1NpZGUgPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8vIEZJTFRFUlNcbiAgJHNjb3BlLmJpZGRpbmdCb3hGaWx0ZXIgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgaWYoJHNjb3BlLmF1Y3Rpb24uY3VycmVudE1pbkJpZDxpdGVtLmluZGV4KSByZXR1cm4gaXRlbTtcbiAgICByZXR1cm47XG4gIH1cbiAgJHNjb3BlLmJpZHNGaWx0ZXIgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgaWYoJHNjb3BlLmF1Y3Rpb24ubGFzdEJpZDxpdGVtLmluZGV4KSByZXR1cm4gaXRlbTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBKUVVFUlkgQU5EIE1BVEVSSUFMSVpFXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgJCgnLnRvb2x0aXBwZWQnKS50b29sdGlwKHtkZWxheTogNTB9KTtcbiAgICAkKCcubW9kYWwnKS5tb2RhbCh7XG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSk7XG4gIGlmKCRzY29wZS5jaG9zZW5Hcm91cCkgZmluZEJpZHMoW10pO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcignR3JvdXBDdHJsJywgZnVuY3Rpb24oJGh0dHAsICRzY29wZSwgJHN0YXRlLCAkd2luZG93LCBNYWluU3ZjKSB7XG5cbiAgdmFyIHRlc3RUaGVtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpO1xuICAgIGlmKHRoZW1lPT0nMScpICRzY29wZS50aGVtZSA9IHRydWU7XG4gICAgZWxzZSAkc2NvcGUudGhlbWUgPSBmYWxzZTtcbiAgfVxuICB0ZXN0VGhlbWUoKTtcbiAgJHNjb3BlLiRvbigndGhlbWVFdmVudCcsIGZ1bmN0aW9uKCkge1xuICAgIHRlc3RUaGVtZSgpO1xuICB9KVxuICAkc2NvcGUudXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpO1xuICAkc2NvcGUuaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWQnKTtcblxuICAkc2NvcGUuYWRkR3JvdXAgPSBmdW5jdGlvbigpIHtcbiAgICBpZighJHNjb3BlLm5ld1RlYW1OYW1lIHx8ICRzY29wZS5uZXdUZWFtTmFtZSA9PT0gJycpIHJldHVybiBNYXRlcmlhbGl6ZS50b2FzdCgnQnJhayBuYXp3eSEnLCA0MDAwKTtcbiAgICAkaHR0cC5wb3N0KCcvYXBpL2dyb3VwJywge1xuICAgICAgbmFtZTogJHNjb3BlLm5ld1RlYW1OYW1lLFxuICAgICAgZGVzY3JpcHRpb246ICRzY29wZS5uZXdUZWFtRGVzY3JpcHRpb25cbiAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnRG9kYW5vIGdydXDEmScsIDQwMDApO1xuICAgICAgZ3JvdXAudXNlcnNbMF0gPSB7X2lkOiBncm91cC51c2Vyc1swXX1cbiAgICAgIGdyb3VwLmFkbWluc1swXSA9IHtfaWQ6IGdyb3VwLmFkbWluc1swXX1cbiAgICAgICRzY29wZS5ncm91cHMucHVzaChncm91cCk7XG4gICAgICAkc2NvcGUubmV3VGVhbU5hbWUgPSAnJztcbiAgICAgICRzY29wZS5uZXdUZWFtRGVzY3JpcHRpb24gPSAnJztcbiAgICAgICRzY29wZS4kZW1pdCgnbmV3R3JvdXBFdmVudCcsIGdyb3VwKTtcbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnQsWCxIVkIHcgZG9kYXdhbml1IGdydXB5JywgNDAwMClcbiAgICB9KVxuICB9XG5cbiAgJHNjb3BlLmFkZFVzZXJUb0dyb3VwID0gZnVuY3Rpb24odXNlcikge1xuICAgIHZhciB1cmwgPSAnL3VzZXIvJyArIHVzZXI7XG4gICAgJGh0dHAuZ2V0KHVybCkuc3VjY2VzcyhmdW5jdGlvbihvYmopIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLm9wZW5lZEdyb3VwLnVzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmKCRzY29wZS5vcGVuZWRHcm91cC51c2Vyc1tpXS51c2VybmFtZT09PW9iai51c2VybmFtZSkgcmV0dXJuIE1hdGVyaWFsaXplLnRvYXN0KCdVxbx5dGtvd25payBqZXN0IGp1xbwgY3rFgm9ua2llbSBncnVweScsIDQwMDApO1xuICAgICAgfVxuICAgICAgJGh0dHAucG9zdCgnL2FwaS9hZGRVc2VyVG9Hcm91cCcsIHtcbiAgICAgICAgZ3JvdXA6ICRzY29wZS5vcGVuZWRHcm91cC5faWQsXG4gICAgICAgIHVzZXI6IG9iai5faWRcbiAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKSB7XG4gICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KFwiRG9kYW5vIHXFvHl0a293bmlrYVwiLCA0MDAwKVxuICAgICAgICAkc2NvcGUub3BlbmVkR3JvdXAudXNlcnMucHVzaChvYmopXG4gICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYoZXJyPT09XCJVbmF1dGhvcml6ZWRcIikgTWFpblN2Yy5sb2dPdXQoKTtcbiAgICAgICAgTWF0ZXJpYWxpemUudG9hc3QoJ1Byb2JsZW0gdyBkb2Rhbml1IHXFvHl0a293bmlrYScsIDQwMDApXG4gICAgICB9KVxuICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgaWYoZXJyPT09XCJVbmF1dGhvcml6ZWRcIikgTWFpblN2Yy5sb2dPdXQoKTtcbiAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdOaWUgb2RuYWxlemlvbm8gdcW8eXRrb3duaWthJywgNDAwMClcbiAgICB9KVxuICB9XG5cbiAgJHNjb3BlLnJlbW92ZVVzZXJGcm9tR3JvdXAgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgJGh0dHAucG9zdCgnL2FwaS9yZW1vdmVVc2VyRnJvbUdyb3VwJywge1xuICAgICAgZ3JvdXA6ICRzY29wZS5vcGVuZWRHcm91cC5faWQsXG4gICAgICB1c2VyOiB1c2VyLl9pZFxuICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKSB7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdChcIlVzdW5pxJl0byB1xbx5dGtvd25pa2FcIiwgNDAwMCk7XG4gICAgICBnZXRHcm91cHMoKTtcbiAgICAgICRzY29wZS5vcGVuR3JvdXAoJHNjb3BlLm9wZW5lZEdyb3VwKTtcbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnUHJvYmxlbSB3IHVzdW5pxJljaXUgdcW8eXRrb3duaWthJywgNDAwMCk7XG4gICAgfSlcbiAgfVxuXG4gICRzY29wZS5hZGRVc2VyVG9BZG1pbnMgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgJGh0dHAucG9zdCgnL2FwaS9hZGRVc2VyVG9BZG1pbnMnLCB7XG4gICAgICBncm91cDogJHNjb3BlLm9wZW5lZEdyb3VwLl9pZCxcbiAgICAgIHVzZXI6IHVzZXIuX2lkXG4gICAgfSkuc3VjY2VzcyhmdW5jdGlvbigpIHtcbiAgICAgIE1hdGVyaWFsaXplLnRvYXN0KFwiRG9kYW5vIHXFvHl0a293bmlrYSBkbyBhZG1pbmlzdHJhdG9yw7N3XCIsIDQwMDApXG4gICAgICAkc2NvcGUub3BlbmVkR3JvdXAuYWRtaW5zLnB1c2godXNlcilcbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnUHJvYmxlbSB3IGRvZGFuaXUgdcW8eXRrb3duaWthIGRvIGFkbWluaXN0cmF0b3LDs3cnLCA0MDAwKVxuICAgIH0pXG4gIH1cbiAgJHNjb3BlLmNoZWNrSWZBZG1pbiA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICRzY29wZS5vcGVuZWRHcm91cC5hZG1pbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmKCRzY29wZS5vcGVuZWRHcm91cC5hZG1pbnNbaV0uX2lkPT1pZCkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gICRzY29wZS5yZW1vdmVVc2VyRnJvbUFkbWlucyA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAkaHR0cC5wb3N0KCcvYXBpL3JlbW92ZVVzZXJGcm9tQWRtaW5zJywge1xuICAgICAgZ3JvdXA6ICRzY29wZS5vcGVuZWRHcm91cC5faWQsXG4gICAgICB1c2VyOiB1c2VyLl9pZFxuICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKSB7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdChcIlVzdW5pxJl0byBhZG1pbmlzdHJhdG9yYVwiLCA0MDAwKTtcbiAgICAgIGdldEdyb3VwcygpO1xuICAgICAgJHNjb3BlLm9wZW5Hcm91cCgkc2NvcGUub3BlbmVkR3JvdXApO1xuICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgaWYoZXJyPT09XCJVbmF1dGhvcml6ZWRcIikgTWFpblN2Yy5sb2dPdXQoKTtcbiAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdQcm9ibGVtIHcgdXN1bmnEmWNpdSBhZG1pbmlzdHJhdG9yYScsIDQwMDApO1xuICAgIH0pXG4gIH1cblxuICAkc2NvcGUuY2hlY2tJZkFkbWluID0gZnVuY3Rpb24oaWQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gJHNjb3BlLm9wZW5lZEdyb3VwLmFkbWlucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYoJHNjb3BlLm9wZW5lZEdyb3VwLmFkbWluc1tpXS5faWQ9PWlkKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgJHNjb3BlLm9wZW5DZXphciA9IGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgaWYobGluaykgJHdpbmRvdy5vcGVuKGxpbmspXG4gIH1cblxuICAkc2NvcGUub3Blbkdyb3VwID0gZnVuY3Rpb24oZ3JvdXApIHtcbiAgICBpZighJHNjb3BlLm9wZW5lZEdyb3VwKSB7XG4gICAgICB2YXIgdG1wID0ge307XG4gICAgICB0bXAudXNlcnMgPSBncm91cC51c2VycztcbiAgICAgIHRtcC5hZG1pbnMgPSBncm91cC5hZG1pbnM7XG4gICAgICBncm91cC51c2VycyA9IFtdO1xuICAgICAgZ3JvdXAuYWRtaW5zID0gW107XG4gICAgICAkc2NvcGUub3BlbmVkR3JvdXAgPSBncm91cDtcbiAgICAgIHJlc29sdmVVc2Vycyh0bXApO1xuICAgIH1lbHNlIGlmKCRzY29wZS5vcGVuZWRHcm91cC5faWQ9PT1ncm91cC5faWQpIHtcbiAgICAgICRzY29wZS5vcGVuZWRHcm91cCA9IG51bGw7XG4gICAgfWVsc2Uge1xuICAgICAgdmFyIHRtcCA9IHt9O1xuICAgICAgdG1wLnVzZXJzID0gZ3JvdXAudXNlcnM7XG4gICAgICB0bXAuYWRtaW5zID0gZ3JvdXAuYWRtaW5zO1xuICAgICAgZ3JvdXAudXNlcnMgPSBbXTtcbiAgICAgIGdyb3VwLmFkbWlucyA9IFtdO1xuICAgICAgJHNjb3BlLm9wZW5lZEdyb3VwID0gZ3JvdXA7XG4gICAgICByZXNvbHZlVXNlcnModG1wKTtcbiAgICB9XG4gIH1cbiAgdmFyIGdldEdyb3VwcyA9IGZ1bmN0aW9uKCkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBjcmF6eSBmdW5jdGlvbiBiZWNhdXNlIGV2ZXJ5XG4gICAgJGh0dHAuZ2V0KCcvYXBpL2dyb3VwcycpLnN1Y2Nlc3MoZnVuY3Rpb24oZ3JvdXBzKSB7ICAgICAgICAgICAvLyB1c2VyIGFuZCBhZG1pbiBoYXMgdG8gYmUgY29udmVydGVkXG4gICAgICAkc2NvcGUuZ3JvdXBzID0gZ3JvdXBzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGp1c3QgYW4gaWQgaW4gYW4gYXJyYXkgdG9cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmdyb3Vwcy5sZW5ndGg7IGkrKykgeyAgICAgICAgICAgIC8vIGFuIG9iamVjdCBpbiBmb3JtIG9mOiB7X2lkOiBcInNvbWVJRFwifVxuICAgICAgICB2YXIgdG1wID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhhY3RseSBoZXJlLCBiZWZvcmUgYW55IG9wZXJhdGlvbnNcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuZ3JvdXBzW2ldLnVzZXJzLmxlbmd0aDsgaisrKSB7IC8vIG9uIHVzZXJzIGFuZCBhZG1pbnMgb2NjdXJlXG4gICAgICAgICAgdG1wLnB1c2goe19pZDogJHNjb3BlLmdyb3Vwc1tpXS51c2Vyc1tqXX0pO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5ncm91cHNbaV0udXNlcnMgPSB0bXA7XG4gICAgICAgIHRtcCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5ncm91cHNbaV0uYWRtaW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgdG1wLnB1c2goe19pZDogJHNjb3BlLmdyb3Vwc1tpXS5hZG1pbnNbal19KTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuZ3JvdXBzW2ldLmFkbWlucyA9IHRtcDtcbiAgICAgIH1cbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgICAkc2NvcGUuZ3JvdXBzID0ge307XG4gICAgfSlcbiAgfVxuXG4gIHZhciByZXNvbHZlVXNlcnMgPSBmdW5jdGlvbihncm91cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAudXNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB1cmwgPSAnL3VzZXJzLycgKyBncm91cC51c2Vyc1tpXS5faWQ7XG4gICAgICAkaHR0cC5nZXQodXJsKS5zdWNjZXNzKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAkc2NvcGUub3BlbmVkR3JvdXAudXNlcnMucHVzaChvYmopO1xuICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5vcGVuZWRHcm91cC51c2Vycy5wdXNoKGdyb3VwLnVzZXJzW2ldID0ge3VzZXJuYW1lOiAndW5rbm93bicsIF9pZDogZ3JvdXAudXNlcnNbaV0uX2lkfSk7XG4gICAgICB9KVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwLmFkbWlucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVybCA9ICcvdXNlcnMvJyArIGdyb3VwLmFkbWluc1tpXS5faWQ7XG4gICAgICAkaHR0cC5nZXQodXJsKS5zdWNjZXNzKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAkc2NvcGUub3BlbmVkR3JvdXAuYWRtaW5zLnB1c2gob2JqKTtcbiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUub3BlbmVkR3JvdXAuYWRtaW5zLnB1c2goZ3JvdXAudXNlcnNbaV0gPSB7dXNlcm5hbWU6ICd1bmtub3duJywgX2lkOiBncm91cC51c2Vyc1tpXS5faWR9KTtcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIGdldEdyb3VwcygpO1xuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgICQoJy50b29sdGlwcGVkJykudG9vbHRpcCgpO1xuICAgICQoJy5tb2RhbCcpLm1vZGFsKCk7XG4gIH0pO1xufSlcbiIsImFwcC5zZXJ2aWNlKCdNYWluU3ZjJywgZnVuY3Rpb24oJHdpbmRvdykge1xuICB2YXIgc3ZjID0gdGhpc1xuICBzdmMubG9nT3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8jL2xvZ2luJztcbiAgfVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdTdGFydEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUsIE1haW5TdmMpe1xuICAkc2NvcGUudXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpO1xuXG4gIHZhciB0ZXN0VGhlbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTtcbiAgICBpZih0aGVtZT09JzEnKSAkc2NvcGUudGhlbWUgPSAxO1xuICAgIGVsc2UgJHNjb3BlLnRoZW1lID0gMDtcbiAgfVxuICB0ZXN0VGhlbWUoKTtcblxuICAkc2NvcGUudG9nZ2xlVGhlbWUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJHNjb3BlLnRoZW1lKSAkc2NvcGUudGhlbWUgPSAwO1xuICAgIGVsc2UgJHNjb3BlLnRoZW1lID0gMTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCAkc2NvcGUudGhlbWUpO1xuICAgICRzY29wZS4kZW1pdCgndGhlbWVFdmVudCcpO1xuICAgICRzY29wZS4kYnJvYWRjYXN0KCd0aGVtZUV2ZW50Jyk7XG4gIH1cblxuICAkc2NvcGUuY2hhbmdlUGFzc3dkID0gZnVuY3Rpb24oKSB7XG4gICAgJGh0dHAucG9zdCgnL2NoYW5nZVBhc3N3ZCcsIHtcbiAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmRPbGQsXG4gICAgICBuZXdQYXNzd29yZDogJHNjb3BlLnBhc3N3b3JkTmV3XG4gICAgfSkuc3VjY2VzcyhmdW5jdGlvbigpIHtcbiAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdIYXPFgm8gem9zdGHFgm8gem1pZW5pb25lJywgNDAwMCk7XG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICBNYXRlcmlhbGl6ZS50b2FzdCgnV3lzdMSFcGnFgiBixYLEhWQnLCA0MDAwKTtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgfSlcbiAgfVxuXG59KVxuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xuICB2YXIgaG9tZVN0YXRlID0ge1xuICAgIG5hbWU6ICdzdGFydCcsXG4gICAgdXJsOiAnL3N0YXJ0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4uL3RlbXBsYXRlcy9zdGFydC5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnU3RhcnRDdHJsJ1xuICB9XG4gIHZhciBzeXN0ZW1TdGF0ZSA9IHtcbiAgICBuYW1lOiAnc3lzdGVtJyxcbiAgICB1cmw6ICcvc3lzdGVtJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4uL3RlbXBsYXRlcy9zeXN0ZW0uaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ1N5c3RlbUN0cmwnXG4gIH1cbiAgdmFyIGJpZGRpbmdTdGF0ZSA9IHtcbiAgICBuYW1lOiAnYmlkZGluZycsXG4gICAgdXJsOiAnL2JpZGRpbmcnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL2JpZGRpbmcuaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ0JpZEN0cmwnXG4gIH1cbiAgdmFyIGdyb3Vwc1N0YXRlID0ge1xuICAgIG5hbWU6ICdncm91cE1hbmFnZXInLFxuICAgIHVybDogJy9ncm91cHMnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi4vdGVtcGxhdGVzL2dyb3Vwcy5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnR3JvdXBDdHJsJ1xuICB9XG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKGhvbWVTdGF0ZSk7XG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKHN5c3RlbVN0YXRlKTtcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoYmlkZGluZ1N0YXRlKTtcbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoZ3JvdXBzU3RhdGUpO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcignU3lzdGVtQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRzdGF0ZSwgQXJyYXlTdmMsIE1haW5TdmMpe1xuXG4gIHZhciB0ZXN0VGhlbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTtcbiAgICBpZih0aGVtZT09JzEnKSAkc2NvcGUudGhlbWUgPSB0cnVlO1xuICAgIGVsc2UgJHNjb3BlLnRoZW1lID0gZmFsc2U7XG4gIH1cbiAgdGVzdFRoZW1lKCk7XG4gICRzY29wZS4kb24oJ3RoZW1lRXZlbnQnLCBmdW5jdGlvbigpIHtcbiAgICB0ZXN0VGhlbWUoKTtcbiAgfSlcbiAgJHNjb3BlLiRvbignY2hvb3NlR3JvdXBFdmVudCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XG4gICAgJHNjb3BlLmNob3Nlbkdyb3VwID0gZGF0YS5faWQ7XG4gICAgZmluZEJpZHMoW10pO1xuICB9KTtcbiAgJHNjb3BlLnNlcXVlbmNlID0ge307XG4gICRzY29wZS50d29TaWRlID0gZmFsc2U7XG4gICRzY29wZS5jdXJyZW50QmlkSW5kZXggPSAwO1xuXG4gICRzY29wZS5hdWN0aW9uID0ge1xuICAgIGJpZHM6IFtcbiAgICAgIHtcImluZGV4XCI6IDEsIFwidmFsdWVcIjogXCJwYXNzXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMiwgXCJ2YWx1ZVwiOiBcInhcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzLCBcInZhbHVlXCI6IFwieHhcIn0sXG4gICAgICB7XCJpbmRleFwiOiA0LCBcInZhbHVlXCI6IFwiMWNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiA1LCBcInZhbHVlXCI6IFwiMWRpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiA2LCBcInZhbHVlXCI6IFwiMWhlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogNywgXCJ2YWx1ZVwiOiBcIjFzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDgsIFwidmFsdWVcIjogXCIxTlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiA5LCBcInZhbHVlXCI6IFwiMmNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxMCwgXCJ2YWx1ZVwiOiBcIjJkaWFtb25kXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTEsIFwidmFsdWVcIjogXCIyaGVhcnRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxMiwgXCJ2YWx1ZVwiOiBcIjJzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDEzLCBcInZhbHVlXCI6IFwiMk5UXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTQsIFwidmFsdWVcIjogXCIzY2x1YlwifSxcbiAgICAgIHtcImluZGV4XCI6IDE1LCBcInZhbHVlXCI6IFwiM2RpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxNiwgXCJ2YWx1ZVwiOiBcIjNoZWFydFwifSxcbiAgICAgIHtcImluZGV4XCI6IDE3LCBcInZhbHVlXCI6IFwiM3NwYWRlXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMTgsIFwidmFsdWVcIjogXCIzTlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAxOSwgXCJ2YWx1ZVwiOiBcIjRjbHViXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjAsIFwidmFsdWVcIjogXCI0ZGlhbW9uZFwifSxcbiAgICAgIHtcImluZGV4XCI6IDIxLCBcInZhbHVlXCI6IFwiNGhlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjIsIFwidmFsdWVcIjogXCI0c3BhZGVcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyMywgXCJ2YWx1ZVwiOiBcIjROVFwifSxcbiAgICAgIHtcImluZGV4XCI6IDI0LCBcInZhbHVlXCI6IFwiNWNsdWJcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyNSwgXCJ2YWx1ZVwiOiBcIjVkaWFtb25kXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjYsIFwidmFsdWVcIjogXCI1aGVhcnRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAyNywgXCJ2YWx1ZVwiOiBcIjVzcGFkZVwifSxcbiAgICAgIHtcImluZGV4XCI6IDI4LCBcInZhbHVlXCI6IFwiNU5UXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMjksIFwidmFsdWVcIjogXCI2Y2x1YlwifSxcbiAgICAgIHtcImluZGV4XCI6IDMwLCBcInZhbHVlXCI6IFwiNmRpYW1vbmRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzMSwgXCJ2YWx1ZVwiOiBcIjZoZWFydFwifSxcbiAgICAgIHtcImluZGV4XCI6IDMyLCBcInZhbHVlXCI6IFwiNnNwYWRlXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzMsIFwidmFsdWVcIjogXCI2TlRcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzNCwgXCJ2YWx1ZVwiOiBcIjdjbHViXCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzUsIFwidmFsdWVcIjogXCI3ZGlhbW9uZFwifSxcbiAgICAgIHtcImluZGV4XCI6IDM2LCBcInZhbHVlXCI6IFwiN2hlYXJ0XCJ9LFxuICAgICAge1wiaW5kZXhcIjogMzcsIFwidmFsdWVcIjogXCI3c3BhZGVcIn0sXG4gICAgICB7XCJpbmRleFwiOiAzOCwgXCJ2YWx1ZVwiOiBcIjdOVFwifVxuICAgIF0sXG4gICAgYWRkQmlkOiBmdW5jdGlvbihiaWQpIHtcbiAgICAgICRzY29wZS5zZXF1ZW5jZVskc2NvcGUuY3VycmVudEJpZEluZGV4XSA9IGJpZDtcbiAgICAgIGlmKCRzY29wZS50d29TaWRlPT10cnVlKSB7XG4gICAgICAgICRzY29wZS5iaWRkaW5nQm94KCRzY29wZS5jdXJyZW50QmlkSW5kZXgrMSwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkc2NvcGUuc2VxdWVuY2VbJHNjb3BlLmN1cnJlbnRCaWRJbmRleCsxXSA9ICRzY29wZS5hdWN0aW9uLmJpZHNbMF07XG4gICAgICAgICRzY29wZS5iaWRkaW5nQm94KCRzY29wZS5jdXJyZW50QmlkSW5kZXgrMiwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBnZXRMYXN0QmlkKCk7XG4gICAgICBmaW5kQmlkcygkc2NvcGUuc2VxdWVuY2UpO1xuICAgIH0sXG4gICAgZ29Ub0JpZDogZnVuY3Rpb24oYmlkKSB7XG4gICAgICAkc2NvcGUuc2VxdWVuY2VbJHNjb3BlLmN1cnJlbnRCaWRJbmRleF0gPSBiaWQ7XG4gICAgICBpZigkc2NvcGUudHdvU2lkZT09ZmFsc2UpIHtcbiAgICAgICAgJHNjb3BlLnNlcXVlbmNlWyRzY29wZS5jdXJyZW50QmlkSW5kZXgrMV0gPSAkc2NvcGUuYXVjdGlvbi5iaWRzWzBdO1xuICAgICAgICAkc2NvcGUuY3VycmVudEJpZEluZGV4Kys7XG4gICAgICB9XG4gICAgICAkc2NvcGUuY3VycmVudEJpZEluZGV4Kys7XG4gICAgICBnZXRMYXN0QmlkKCk7XG4gICAgICBmaW5kQmlkcygkc2NvcGUuc2VxdWVuY2UpO1xuICAgIH0sXG4gICAgbGFzdEJpZDogMyxcbiAgICBjYW5Eb3VibGU6IGZhbHNlLFxuICAgIGNhblJlZG91YmxlOiBmYWxzZVxuICB9XG5cbiAgJHNjb3BlLmJpZGRpbmdCb3ggPSBmdW5jdGlvbihpbmRleCwgYXV0bykge1xuICAgICRzY29wZS5jdXJyZW50QmlkSW5kZXggPSBpbmRleFxuICAgIGlmKCFhdXRvKSB7XG4gICAgICBpZigkc2NvcGUuc2hvd0JpZGRpbmdCb3gpICRzY29wZS5zaG93QmlkZGluZ0JveCA9IGZhbHNlO1xuICAgICAgZWxzZSAkc2NvcGUuc2hvd0JpZGRpbmdCb3ggPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgaSA9IGluZGV4LTE7XG4gICAgdmFyIG1heGkgPSAzO1xuICAgIHdoaWxlICgkc2NvcGUuc2VxdWVuY2VbaV0pIHtcbiAgICAgICAgaWYoJHNjb3BlLnNlcXVlbmNlW2ldLmluZGV4Pm1heGkpIG1heGkgPSAkc2NvcGUuc2VxdWVuY2VbaV0uaW5kZXg7XG4gICAgICAgIGktLTtcbiAgICB9XG4gICAgJHNjb3BlLmF1Y3Rpb24uY3VycmVudE1pbkJpZCA9IG1heGk7XG4gIH1cblxuICB2YXIgZ2V0TGFzdEJpZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmKEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKT09LTEpIHtcbiAgICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAzO1xuICAgICAgJHNjb3BlLmNhbkRvdWJsZT1mYWxzZTtcbiAgICAgICRzY29wZS5jYW5SZWRvdWJsZT1mYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmV2ZW50aW5nIGVtcHR5IHNlcXVlbmNlXG4gICAgdmFyIGkgPSBBcnJheVN2Yy5nZXRTaXplKCRzY29wZS5zZXF1ZW5jZSksIGogPSBpOyAgICAgLy8gZ2V0dGluZyBzaXplIG9mIHNlcXVlbmNlXG4gICAgJHNjb3BlLmF1Y3Rpb24ubGFzdEJpZCA9ICRzY29wZS5zZXF1ZW5jZVtpXS5pbmRleDtcbiAgICB3aGlsZSgkc2NvcGUuc2VxdWVuY2VbaV0uaW5kZXggPD0gMykgeyAgICAgICAgICAgICAgICAvLyBzZWFyY2hpbmcgZm9yIHRoZSBsYXN0IG5vbi1wYXNzL3gveHggYmlkXG4gICAgICAkc2NvcGUuYXVjdGlvbi5sYXN0QmlkID0gJHNjb3BlLnNlcXVlbmNlW2ldLmluZGV4O1xuICAgICAgaS0tO1xuICAgICAgaWYoISRzY29wZS5zZXF1ZW5jZVtpXSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGVyZSBhcmUgb25seSBwYXNzc2VzXG4gICAgICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAzO1xuICAgICAgICAkc2NvcGUuY2FuRG91YmxlPWZhbHNlO1xuICAgICAgICAkc2NvcGUuY2FuUmVkb3VibGU9ZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgaSBjb250YWlucyBpdHMgaW5kZXhcbiAgICAkc2NvcGUuYXVjdGlvbi5sYXN0QmlkID0gJHNjb3BlLnNlcXVlbmNlW2ldLmluZGV4O1xuICAgIGk9ajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGkgZXF1YWxzIHNpemUgb2Ygc2VxdWVuY2Ugb25jZSBhZ2FpblxuICAgIHdoaWxlKCRzY29wZS5zZXF1ZW5jZVtqXS5pbmRleD09PTEpIHtqLS07fSAgICAgICAgICAgIC8vIG5vdyBzZWFyY2hpbmcgZm9yIHRoZSBsYXN0IG5vbi1wYXNzIGJpZFxuICAgIGlmKCRzY29wZS5zZXF1ZW5jZVtqXS5pbmRleD09PTMpIHsgICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSByZWRvdWJsZVxuICAgICAgJHNjb3BlLmF1Y3Rpb24uY2FuRG91YmxlPWZhbHNlO1xuICAgICAgJHNjb3BlLmF1Y3Rpb24uY2FuUmVkb3VibGU9ZmFsc2U7XG4gICAgfWVsc2UgaWYoJHNjb3BlLnNlcXVlbmNlW2pdLmluZGV4PT09MikgeyAgICAgICAgICAgICAgLy8gaWYgaXQncyBhIGRvdWJsZVxuICAgICAgJHNjb3BlLmF1Y3Rpb24uY2FuRG91YmxlPWZhbHNlXG4gICAgICBpZihqJTI9PWklMikgJHNjb3BlLmF1Y3Rpb24uY2FuUmVkb3VibGU9dHJ1ZTsgICAgICAgLy8gYW5kIGlmIGl0J3MgYmVlbiBwbGF5ZWQgYnkgdGhlIG9wcG9zaXRlIHNpZGVcbiAgICAgIGVsc2UgJHNjb3BlLmF1Y3Rpb24uY2FuUmVkb3VibGU9ZmFsc2U7XG4gICAgfWVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBhbnkgb3RoZXIgYmlkXG4gICAgICAkc2NvcGUuYXVjdGlvbi5jYW5SZWRvdWJsZT1mYWxzZTtcbiAgICAgIGlmKGolMj09aSUyKSAkc2NvcGUuYXVjdGlvbi5jYW5Eb3VibGU9dHJ1ZTsgICAgICAgICAvLyB0aGF0IGhhcyBiZWVuIHBsYXllZCBieSB0aGUgb3Bwb3NpdGUgc2lkZVxuICAgICAgZWxzZSAkc2NvcGUuYXVjdGlvbi5jYW5Eb3VibGU9ZmFsc2U7XG4gICAgfVxuICB9XG4gIHZhciBmaW5kQmlkcyA9IGZ1bmN0aW9uKHNlcXVlbmNlKSB7XG4gICAgdmFyIHRtcCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQXJyYXlTdmMuZ2V0U2l6ZShzZXF1ZW5jZSk7IGkrKykge1xuICAgICAgdG1wLnB1c2goc2VxdWVuY2VbaV0uaW5kZXgpO1xuICAgIH1cbiAgICAkaHR0cC5nZXQoJy9hcGkvYmlkJywge1xuICAgICAgaGVhZGVyczogeyd4LWdyb3VwJzogJHNjb3BlLmNob3Nlbkdyb3VwLCAneC1zZXF1ZW5jZSc6IHRtcH1cbiAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGJpZHMpIHtcbiAgICAgICRzY29wZS5iaWRzID0gYmlkc1xuICAgICAgJHNjb3BlLmNvbnZTZWFyY2ggPSBmYWxzZTtcbiAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmKGVycj09PVwiVW5hdXRob3JpemVkXCIpIE1haW5TdmMubG9nT3V0KCk7XG4gICAgICAkc2NvcGUuYmlkcyA9IHt9O1xuICAgIH0pXG4gIH1cblxuICAkc2NvcGUuZmluZEJpZHNCeUNvbnYgPSBmdW5jdGlvbiAoY29udmVudGlvbikge1xuICAgICRodHRwLmdldCgnL2FwaS9iaWRCeUMnLCB7XG4gICAgICBoZWFkZXJzOiB7J3gtZ3JvdXAnOiAkc2NvcGUuY2hvc2VuR3JvdXAsICd4LWNvbnZlbnRpb24nOiBjb252ZW50aW9ufVxuICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oYmlkcykge1xuICAgICAgJHNjb3BlLmJpZHMgPSBiaWRzXG4gICAgICAkc2NvcGUuY29udlNlYXJjaCA9IHRydWU7XG4gICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICBpZihlcnI9PT1cIlVuYXV0aG9yaXplZFwiKSBNYWluU3ZjLmxvZ091dCgpO1xuICAgICAgJHNjb3BlLmJpZHMgPSB7fTtcbiAgICB9KVxuICB9XG4gIC8vIE5PVCBJTlRFUkVTVElORyBGVU5DVElPTlM6XG4gICRzY29wZS5yZW1vdmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2VxdWVuY2UgPSB7fVxuICAgICRzY29wZS5hdWN0aW9uLmxhc3RCaWQgPSAzO1xuICAgICRzY29wZS5hdWN0aW9uLmNhbkRvdWJsZSA9IGZhbHNlO1xuICAgICRzY29wZS5hdWN0aW9uLmNhblJlZG91YmxlID0gZmFsc2U7XG4gICAgJHNjb3BlLmF1Y3Rpb24uY3VycmVudE1pbkJpZCA9IDM7XG4gICAgJHNjb3BlLmJpZGRpbmdCb3goMCwgdHJ1ZSk7XG4gICAgZmluZEJpZHMoJHNjb3BlLnNlcXVlbmNlKTs7XG4gIH1cbiAgJHNjb3BlLnJlbW92ZUxhc3QgPSBmdW5jdGlvbigpIHtcbiAgICBpZihBcnJheVN2Yy5nZXRTaXplKCRzY29wZS5zZXF1ZW5jZSk8MCkgcmV0dXJuIE1hdGVyaWFsaXplLnRvYXN0KCdMaWN5dGFjamEgamVzdCBqdcW8IHB1c3RhJywgNDAwMCk7XG4gICAgQXJyYXlTdmMuZGVzdHJveUxhc3QoJHNjb3BlLnNlcXVlbmNlKVxuICAgIGlmKEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKTwwKSByZXR1cm47XG4gICAgaWYoJHNjb3BlLnR3b1NpZGU9PWZhbHNlKSB7XG4gICAgICBBcnJheVN2Yy5kZXN0cm95TGFzdCgkc2NvcGUuc2VxdWVuY2UpXG4gICAgfVxuICAgIGdldExhc3RCaWQoKTtcbiAgICB2YXIgaSA9IEFycmF5U3ZjLmdldFNpemUoJHNjb3BlLnNlcXVlbmNlKTtcbiAgICBpZihpPT09LTEpIGkgPSAwO1xuICAgICRzY29wZS5iaWRkaW5nQm94KGksIHRydWUpO1xuICAgIGZpbmRCaWRzKCRzY29wZS5zZXF1ZW5jZSk7XG4gIH1cbiAgJHNjb3BlLnRvZ2dsZVR3b1NpZGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZigkc2NvcGUudHdvU2lkZT09ZmFsc2UpIHtcbiAgICAgICRzY29wZS50d29TaWRlID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUudHdvU2lkZSA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gRklMVEVSU1xuICAkc2NvcGUuYmlkZGluZ0JveEZpbHRlciA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICBpZigkc2NvcGUuYXVjdGlvbi5jdXJyZW50TWluQmlkPGl0ZW0uaW5kZXgpIHJldHVybiBpdGVtO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEpRVUVSWSBBTkQgTUFURVJJQUxJWkVcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAkKCcudG9vbHRpcHBlZCcpLnRvb2x0aXAoe2RlbGF5OiA1MH0pO1xuICAgICQoJy5tb2RhbCcpLm1vZGFsKHtcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIGlmKCRzY29wZS5jaG9zZW5Hcm91cCkgZmluZEJpZHMoW10pO1xufSk7XG4iXX0=
